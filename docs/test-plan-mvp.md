# Test Plan: Bharat Context-Adaptive Engine (MVP)

**Status:** DRAFT
**Owner:** Murat (TEA Agent)
**Date:** 2025-11-29

## 1. Executive Summary & Risk Assessment
We are testing a **Zero-Click Personalization Infrastructure** for "Next Billion Users".
*   **Criticality:** High. If this fails, the user gets a generic experience (Day 0 churn).
*   **Complexity:** Medium. Monorepo with Mobile SDK (React Native), Backend (Python), and Network dependency.
*   **Key Risk:** "Fail-Closed" behavior. If the backend is unreachable, the app MUST NOT crash. It must fail-open (Safe Mode).

## 2. Test Levels & Scope (The Pyramid)

### Level 1: Unit / Signal Integrity (P0)
*   **Scope:** SDK Signal Collection (`collectSignals`).
*   **Goal:** Verify inputs (Time, Network, RAM) are captured correctly.
*   **Why:** Garbage In, Garbage Out. If we can't detect "Morning", we can't personalize.

### Level 2: Integration / The Handshake (P0)
*   **Scope:** SDK <-> Backend API (`sendSignalsToBackend`).
*   **Goal:** Verify JSON payload structure and Network handling.
*   **Why:** The network in Tier 2 cities is flaky. This is the weakest link.

### Level 3: Logic / The Brain (P1)
*   **Scope:** Backend Inference (`main.py`).
*   **Goal:** Verify segmentation logic (Low RAM -> Lite Mode).
*   **Why:** Business value delivery.

### Level 4: End-to-End / The Experience (P1)
*   **Scope:** Example App UI.
*   **Goal:** Verify the user sees the correct card ("Lite" vs "Standard").

## 3. Test Scenarios (Priority Matrix)

| ID | Priority | Component | Scenario | Expected Result |
| :--- | :--- | :--- | :--- | :--- |
| **MVP-01** | **P0** | **SDK** | **Fail-Open on Network Error** | Kill Backend. App loads "Standard Mode". No Crash. |
| **MVP-02** | **P0** | **Backend** | **Health Check** | GET `/` returns 200 OK "Namaste". |
| **MVP-03** | **P1** | **Inference** | **Low-End Device Segmentation** | POST payload with `device_class: low_end` -> Returns `lite_mode_user`. |
| **MVP-04** | **P1** | **Inference** | **High-End Device Segmentation** | POST payload with `device_class: high_end` -> Returns `general` / `standard`. |
| **MVP-05** | **P2** | **SDK** | **Time Detection** | Verify `isMorning` logic matches system clock. |

## 4. Execution Strategy
1.  **Automated:** Use `curl` to verify Backend Logic (MVP-02, MVP-03, MVP-04).
2.  **Manual/Simulated:** Use Example App to verify Fail-Open (MVP-01).

---
*Generated by TEA Agent based on `test-priorities-matrix.md`.*

